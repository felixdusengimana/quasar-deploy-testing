import{Y as g,j as b,q as k,Z as D,h as L,$ as F,b as P,V as $,Q as _}from"./index.e6697016.js";import{r as w,b as K}from"./focus-manager.d6507951.js";import{e as N}from"./render.45809d99.js";import{g as c}from"./vm.78afe1d7.js";let Q=document.body;function S(e){const t=document.createElement("div");if(e!==void 0&&(t.id=e),g.globalNodes!==void 0){const n=g.globalNodes.class;n!==void 0&&(t.className=n)}return Q.appendChild(t),t}function T(e){e.remove()}const d=[];function G(e){return d.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function M(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return c(e)}else if(e.__qPortal===!0){const n=c(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=c(e)}while(e!=null)}function O(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=M(e,t);continue}e.hide(t)}e=c(e)}}function A(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Y(e,t,n,i){const o=b(!1),u=b(!1);let r=null;const f={},h=i===!0&&A(e);function q(p){if(p===!0){w(f),u.value=!0;return}u.value=!1,o.value===!1&&(h===!1&&r===null&&(r=S()),o.value=!0,d.push(e.proxy),K(f))}function v(p){if(u.value=!1,p!==!0)return;w(f),o.value=!1;const m=d.indexOf(e.proxy);m!==-1&&d.splice(m,1),r!==null&&(T(r),r=null)}return k(()=>{v(!0)}),e.proxy.__qPortal=!0,D(e.proxy,"contentEl",()=>t.value),{showPortal:q,hidePortal:v,portalIsActive:o,portalIsAccessible:u,renderPortal:()=>h===!0?n():o.value===!0?[L(F,{to:r},n())]:void 0}}const Z={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function z(e,t=()=>{},n=()=>{}){return{transitionProps:P(()=>{const i=`q-transition--${e.transitionShow||t()}`,o=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${i}-enter-from`,enterActiveClass:`${i}-enter-active`,enterToClass:`${i}-enter-to`,leaveFromClass:`${o}-leave-from`,leaveActiveClass:`${o}-leave-active`,leaveToClass:`${o}-leave-to`}}),transitionStyle:P(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const s=[];let l;function j(e){l=e.keyCode===27}function I(){l===!0&&(l=!1)}function H(e){l===!0&&(l=!1,_(e,27)===!0&&s[s.length-1](e))}function y(e){window[e]("keydown",j),window[e]("blur",I),window[e]("keyup",H),l=!1}function J(e){$.is.desktop===!0&&(s.push(e),s.length===1&&y("addEventListener"))}function R(e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.length===0&&y("removeEventListener"))}const a=[];function C(e){a[a.length-1](e)}function X(e){$.is.desktop===!0&&(a.push(e),a.length===1&&document.body.addEventListener("focusin",C))}function x(e){const t=a.indexOf(e);t>-1&&(a.splice(t,1),a.length===0&&document.body.removeEventListener("focusin",C))}function E(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var ee=N({name:"close-popup",beforeMount(e,{value:t}){const n={depth:E(t),handler(i){n.depth!==0&&setTimeout(()=>{const o=G(e);o!==void 0&&O(o,i,n.depth)})},handlerKey(i){_(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=E(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});export{ee as C,z as a,Y as b,X as c,R as d,J as e,M as f,d as p,x as r,Z as u};
